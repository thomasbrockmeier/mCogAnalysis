function kappaMatrix = kappaFormat( dataMatrix )
% Convert input matrix to format suitable for kappa analysis.
%
% N.B. No missing data allowed!

[ ~, ~, nRaters, ~ ] = descriptives( dataMatrix );
nOptions = size(unique(dataMatrix(~isnan(dataMatrix))), 1);
nPairs = size(dataMatrix, 2);

% if size(unique(nRaters), 2) ~= 1
%     dataMatrix = kappaSeed(dataMatrix, nRaters);
% end


% Create M x N matrix with M = amount of pairs and N = amount of unique
% ratings.
kappaMatrix = zeros(nPairs, nOptions);

% Check if ratings are sampled down to true/false. If so, convert
% all 4's into 2's.
if nOptions == 2
    

for i = 1:nPairs
    % Get data for pair 'i' and remove NaN values.
    currentPair = dataMatrix(:, i);
% %     currentPair = currentPair(~isnan(currentPair));
    
    for j = 1:nOptions
        % Get total amount of ratings 'j' for pair 'i' and enter into
        % output matrix.
        kappaMatrix(i, j) = size(find(currentPair == j), 1);
    end
end

% Calculate kappa statistic.
% fleiss(kappaMatrix)

end